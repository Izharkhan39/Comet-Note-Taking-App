{
  "version": 3,
  "sources": ["../../editorjs-undo/dist/bundle.js"],
  "sourcesContent": ["!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Undo=e():t.Undo=e()}(self,(function(){return(()=>{\"use strict\";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.d(e,{default:()=>s});var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.holder=n,this.observer=null,this.debounceTimer=200,this.mutationDebouncer=this.debounce((function(){e()}),this.debounceTimer)}var e,i;return e=t,i=[{key:\"setMutationObserver\",value:function(){var t=this,e=this.holder;this.observer=new MutationObserver((function(e){t.mutationHandler(e)})),this.observer.observe(e,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:\"mutationHandler\",value:function(t){var e=this,n=!1;t.forEach((function(t){switch(t.type){case\"childList\":t.target===e.holder?e.onDestroy():n=!0;break;case\"characterData\":n=!0;break;case\"attributes\":t.target.classList.contains(\"ce-block\")||(n=!0)}})),n&&this.mutationDebouncer()}},{key:\"debounce\",value:function(t,e){var n,i=this;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];var a=i;clearTimeout(n),n=setTimeout((function(){return t.apply(a,s)}),e)}}},{key:\"onDestroy\",value:function(){var t=new CustomEvent(\"destroy\");document.dispatchEvent(t),this.observer.disconnect()}}],i&&n(e.prototype,i),t}();function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e){var n=this,o=e.editor,s=e.config,r=void 0===s?{}:s,a=e.onUpdate,c=e.maxLength;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var h={maxLength:30,onUpdate:function(){},config:{shortcuts:{undo:\"CMD+Z\",redo:\"CMD+Y\"}}},u=o.configuration,l=u.holder,d=h.config.shortcuts,f=r.shortcuts,v=void 0===f?d:f;this.holder=\"string\"==typeof l?document.getElementById(l):l,this.editor=o,this.shouldSaveHistory=!0,this.readOnly=u.readOnly,this.maxLength=c||h.maxLength,this.onUpdate=a||h.onUpdate,this.config={shortcuts:v},new i((function(){return n.registerChange()}),this.holder).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()}var e,n,s;return e=t,s=[{key:\"isReadOnlySupported\",get:function(){return!0}}],(n=[{key:\"truncate\",value:function(t,e){for(;t.length>e;)t.shift()}},{key:\"initialize\",value:function(t){var e=\"blocks\"in t?t.blocks:t,n={index:e.length-1,state:e};this.stack[0]=n,this.initialItem=n}},{key:\"clear\",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[{type:\"paragraph\",data:{text:\"\"}}]}],this.position=0,this.onUpdate()}},{key:\"registerChange\",value:function(){var t=this;this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then((function(e){t.editorDidUpdate(e.blocks)&&t.save(e.blocks)})),this.shouldSaveHistory=!0)}},{key:\"editorDidUpdate\",value:function(t){var e=this.stack[this.position].state;return!!t.length&&(t.length!==e.length||JSON.stringify(e)!==JSON.stringify(t))}},{key:\"save\",value:function(t){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var e=this.editor.blocks.getCurrentBlockIndex();this.stack.push({index:e,state:t}),this.position+=1,this.onUpdate()}},{key:\"undo\",value:function(){var t=this;if(this.canUndo()){this.shouldSaveHistory=!1;var e=this.stack[this.position-=1],n=e.index,i=e.state;this.onUpdate(),this.editor.blocks.render({blocks:i}).then((function(){return t.editor.caret.setToBlock(n,\"end\")}))}}},{key:\"redo\",value:function(){var t=this;if(this.canRedo()){this.shouldSaveHistory=!1;var e=this.stack[this.position+=1],n=e.index,i=e.state;this.onUpdate(),this.editor.blocks.render({blocks:i}).then((function(){return t.editor.caret.setToBlock(n,\"end\")}))}}},{key:\"canUndo\",value:function(){return!this.readOnly&&this.position>0}},{key:\"canRedo\",value:function(){return!this.readOnly&&this.position<this.count()}},{key:\"count\",value:function(){return this.stack.length-1}},{key:\"parseKeys\",value:function(t){var e={CMD:/(Mac)/i.test(navigator.platform)?\"metaKey\":\"ctrlKey\",ALT:\"altKey\",SHIFT:\"shiftKey\"},n=t.slice(0,-1).map((function(t){return e[t]})),i=n.includes(\"shiftKey\")?t[t.length-1].toUpperCase():t[t.length-1].toLowerCase();return n.push(i),n}},{key:\"setEventListeners\",value:function(){var t=this,e=this.holder,n=this.config.shortcuts,i=n.undo,o=n.redo,s=i.replace(/ /g,\"\").split(\"+\"),r=o.replace(/ /g,\"\").split(\"+\"),a=this.parseKeys(s),c=this.parseKeys(r),h=function(t,e){return!(2!==e.length||!t[e[0]]||t.key!==e[1])||!(3!==e.length||!t[e[0]]||!t[e[1]]||t.key!==e[2])},u=function(e){h(e,a)&&(e.preventDefault(),t.undo())},l=function(e){h(e,c)&&(e.preventDefault(),t.redo())};e.addEventListener(\"keydown\",u),e.addEventListener(\"keydown\",l),e.addEventListener(\"destroy\",(function(){e.removeEventListener(\"keydown\",u),e.removeEventListener(\"keydown\",l)}))}}])&&o(e.prototype,n),s&&o(e,s),t}();return e.default})()}));"],
  "mappings": "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",
  "names": ["e", "n", "i", "t", "o", "s"]
}
